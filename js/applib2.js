function openNav(){document.getElementById("mySidebar").style.width="260px",document.getElementById("main").style.marginLeft="260px",document.getElementById("map").style.marginLeft="260px",document.getElementById("feedbackbar").style.width="260px"}function closeNav(){document.getElementById("mySidebar").style.width="0",document.getElementById("main").style.marginLeft="0",document.getElementById("map").style.marginLeft="0",document.getElementById("feedbackbar").style.width="0"}function isNavOpened(){return"260px"===document.getElementById("mySidebar").style.width}function atualizaEcosistemaInicialmenteSelecionado(){for(var e=$(document.getElementsByTagName("option")),a=0;a<e.length;a++)e[a].text==window.ecosistemaGlobal.ecosistema&&(e[a].selected=!0)}function atualizaTooltip(){$(document.getElementById("ecosistemas")).tooltip("hide"),$(document.getElementById("ecosistemas")).attr("title",document.getElementById("ecosistemas").value),$(document.getElementById("ecosistemas")).attr("data-original-title",document.getElementById("ecosistemas").value),$(document.getElementById("ecosistemas")).tooltip("update")}function toggleClock(e){"⊕"===e.innerText?e.innerText="⊖":e.innerText="⊕"}$(function(){$('[data-toggle="tooltip"]').tooltip()});var map,targetNode=document.getElementById("exampleModal"),observer=new MutationObserver(function(){var a=!0;try{participanteSendoVisualizado}catch(e){"ReferenceError"==e.name&&(a=!1)}a&&""!==participanteSendoVisualizado&&"none"!=targetNode.style.display&&(document.getElementById("message").innerHTML=participanteSendoVisualizado)});observer.observe(targetNode,{attributes:!0,childList:!0}),$("#exampleModal").on("hidden.bs.modal",function(){participanteSendoVisualizado="Exemplo de mensagem: \nEcosistema: Empresas de TI de João Pessoa; \nNome da empresaa: Conductor Tecnologia; \nEndereço: R. Antônio Régis de Brito, 15 - Pedro Gondim, João Pessoa - PB, 58031-106; \nSite: conductor.com.br; \nCaracteristicas: trabalha com java, .net;"}),$(function(){$("#mySidebar").swipe({swipe:function(e,a){"left"===a&&closeNav()},excludedElements:"label, button, input, select, textarea"})}),"true"===menuVisivel?openNav():closeNav();var house={lat:-7.114142,lng:-34.826993},markers=[],locations=[],caracteristicasValidas=[];if(ecosistemaGlobal=ecosistemas[0],data=ecosistemas[0].empresas,0<ecosistemasIniciais.lenght)for(var i=0;i<ecosistemas.length;i++)if(ecosistemas[i].ecosistema===ecosistemasIniciais[0].ecosistema){ecosistemaGlobal=ecosistemas[i],data=ecosistemas[i].empresas;break}function WebmailViewModel(){var o=this;function a(e){return-1!==o.tecnologiasFiltro().indexOf(e.toLowerCase())}function t(e){return nomeOK=e.title.toLowerCase().includes(this.searchFor()),contemTecnologiasAtivadas=e.caracteristicas.filter(a),nomeOK&&0<contemTecnologiasAtivadas.length}function n(e){e.setRequestHeader("Ocp-Apim-Subscription-Key",bingKey)}searchFor=ko.observable(""),filtrarPorCaracteristica=ko.observable(""),o.ecosistemas=ko.observableArray(ecosistemas.slice(0)),o.itCompanies=ko.observableArray(data.slice(0)),o.newsOfTheSelectedCompany=ko.observableArray([]),o.caracteristicasValidas=ko.observableArray(caracteristicasValidas),o.tecnologiasFiltro=ko.observableArray([]),o.search=function(){var e=data.filter(t);o.itCompanies.removeAll();for(var a=0;a<e.length;a++)o.itCompanies.push(e[a]);locations=o.itCompanies.slice(0),hideListings(),showListings()},o.filtrarCaracteristica=function(){for(var e=document.getElementsByClassName("labelCaracteristicas"),a=0;a<e.length;a++)-1!==e[a].innerText.indexOf(filtrarPorCaracteristica())?e[a].style.display="block":e[a].style.display="none"},o.limparFiltroPorCaracteristica=function(){filtrarPorCaracteristica(""),o.filtrarCaracteristica()},onListItemClick=function(e,a){for(var t=makeMarkerIcon("0091ff"),i=makeMarkerIcon("FFFF24"),s=0;s<e.itCompanies().length;s++)e.itCompanies()[s].marker.setAnimation(null),e.itCompanies()[s].marker.setIcon(t);map.getBounds().contains(a.marker.getPosition())||map.setCenter(new google.maps.LatLng(a.location)),function(e){var a={q:'"'+e.replace(" ","+")+'"'};$.getJSON({url:"https://api.cognitive.microsoft.com/bing/v7.0/news/search",data:a,type:"GET",dataType:"json",success:function(e){o.newsOfTheSelectedCompany.removeAll();for(var a=0;a<e.value.length;a++)o.newsOfTheSelectedCompany.push({name:e.value[a].name,url:e.value[a].url});console.debug("sucess")},error:function(){console.debug("failed")},beforeSend:n})}(a.title),a.marker.setIcon(null),a.marker.setIcon(i),toggleBounce(a.marker),setTimeout(function(){toggleBounce(a.marker),populateInfoWindow(a.marker)},500)},o.clear=function(){""!==searchFor().trim()&&(searchFor(""),o.search())},atualizaEcosistema=function(){for(var e=0;e<ecosistemas.length;e++)if(ecosistemas[e].ecosistema===document.getElementById("ecosistemas").value){window.data=ecosistemas[e].empresas;break}atualizaCaracteristicasValidas(),caracteristicaClicked(),o.search()},atualizaEcosistemaInicial=function(){atualizaEcosistemaInicialmenteSelecionado(),atualizaTooltip(),atualizaCaracteristicasValidas(),caracteristicaClickedInicial(),o.search()},getCaracteristicasValidas=function(){caracteristicasValidas=[];for(var e=0;e<window.data.length;e++)for(var a=window.data[e],t=0;t<a.caracteristicas.length;t++){var i=a.caracteristicas[t];caracteristicasValidas.includes(i.toLowerCase())||caracteristicasValidas.push(i.toLowerCase())}return caracteristicasValidas},atualizaCaracteristicasValidas=function(){o.caracteristicasValidas.removeAll(),o.caracteristicasValidas(getCaracteristicasValidas().slice(0))},caracteristicaClicked=function(e){console.debug("Antes:\n\tdata: "+e+"\n\ttecnologiasFiltro: "+o.tecnologiasFiltro());var a=document.getElementsByClassName("labelCaracteristicas");0==document.getElementsByClassName("labelCaracteristicas active").length&&o.tecnologiasFiltro.removeAll();for(var t=0;t<a.length;t++){if(a[t].innerText===e)o.tecnologiasFiltro().find(function(e){return e===a[t].innerText})?o.tecnologiasFiltro.splice(o.tecnologiasFiltro.indexOf(e),1):o.tecnologiasFiltro.push(a[t].innerText.toLowerCase())}0==o.tecnologiasFiltro().length&&o.tecnologiasFiltro(getCaracteristicasValidas().slice(0)),console.debug("Depois:\n\tdata: "+e+"\n\ttecnologiasFiltro: "+o.tecnologiasFiltro()),o.search()},ativaOuNaoAtiva=function(e){for(var a="",t=0;t<caracteristicasIniciais.length;t++)if(-1!==caracteristicasIniciais[t].indexOf(e)){a="active";break}return a},caracteristicaClickedInicial=function(e){if(0!=caracteristicasIniciais.length){console.debug("---------------Cfg inicial ------------"),console.debug("Antes:\n\tdata: "+e+"\n\ttecnologiasFiltro: "+o.tecnologiasFiltro());document.getElementsByClassName("labelCaracteristicas"),document.getElementsByClassName("labelCaracteristicas active");for(var a=0;a<caracteristicasIniciais.length;a++)o.tecnologiasFiltro.push(caracteristicasIniciais[a]);console.debug("Depois:\n\tdata: "+e+"\n\ttecnologiasFiltro: "+o.tecnologiasFiltro()),o.search()}else caracteristicaClicked()},o.search()}ko.applyBindings(new WebmailViewModel),document.getElementById("form1").action="https://formspree.io/"+emailForContributionUsingFormspree,document.getElementById("form2").action="https://formspree.io/"+emailForContributionUsingFormspree,atualizaEcosistemaInicial();